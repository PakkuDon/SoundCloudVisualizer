<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>SoundCloud Visualizer</title>
        <link rel="stylesheet" href="style.css" />
    </head>
    <body ng-app="SoundCloudVisualizer">
        <input id="toggle-sidebar" type="checkbox" />
        <label for="toggle-sidebar">&#9664;</label>

        <div id="notifications">
        </div>

        <div id="sidebar">
            <div id="history" ng-controller="HistoryController as histCtrl">
                Recently played
                <div class="track" ng-repeat="track in histCtrl.player.getHistory()">
                    <div ng-bind="track.user.username"></div>
                    <div ng-bind="track.title"></div>
                    <div ng-bind="track.genre"></div>
                    <div>
                        <a href="{{ track.permalink_url }}">Permalink</a>
                    </div>
                    <div class="actions">
                        <span ng-click="histCtrl.play($index)">Play</span>
                        <span ng-click="histCtrl.delete($index)">Delete</span>
                        <span ng-click="histCtrl.queue($index)">Queue</span>
                    </div>
                </div>
            </div>
            <div id="playback-queue" ng-controller="PlaybackQueueController as queueCtrl">
                Playback Queue
                <div class="track" ng-repeat="track in queueCtrl.player.getPlaybackQueue()">
                    <div ng-bind="track.user.username"></div>
                    <div ng-bind="track.title"></div>
                    <div ng-bind="track.genre"></div>
                    <div>
                        <a href="{{ track.permalink_url }}">Permalink</a>
                    </div>
                    <div class="actions">
                        <span ng-click="queueCtrl.play($index)">Play</span>
                        <span ng-click="queueCtrl.delete($index)">Delete</span>
                    </div>
                </div>
            </div>
        </div>

        <div id="body">
            <div id="canvas-panel">
                <canvas id="visualizer" width="500" height="500">
                    Your browser does not support the HTML5 canvas element.
                </canvas>
            </div>

            <div id="container" ng-controller="PlayerController as playerCtrl">
                <button type="button" id="toggle-form-btn">&#9660;</button>
                <div id="collapsible-container">
                    <div>
                        <form id="player-form" ng-submit="playerCtrl.play()">
                            <input type="text" id="track-url" size="40"
                                   placeholder="SoundCloud Track URL"
                                   ng-model="playerCtrl.track_url" />
                            <input type="submit" value="Load song" />
                        </form>
                    </div>
                    <div>
                        <label for="visualizer-dropdown">
                            Visualizer:
                        </label>
                        <select id="visualizer-dropdown">
                        </select>
                    </div>
                    <div id="song-information">
                        <img id="thumbnail" ng-src="{{ playerCtrl.player.getCurrentTrack().artwork_url }}" />
                        <div id="details">
                            <div id="artist" ng-bind="playerCtrl.player.getCurrentTrack().user.username"></div>
                            <div id="title" ng-bind="playerCtrl.player.getCurrentTrack().title"></div>
                            <div id="genre" ng-bind="playerCtrl.player.getCurrentTrack().genre"></div>
                        </div>
                    </div>
                    <audio id="player" crossorigin="anonymous" controls ng-src="{{ playerCtrl.player.getCurrentTrack().stream_url | trusted }}" >
                        Your browser does not support the HTML5 audio element.
                    </audio>
                    <footer>
                        <a href="https://github.com/PakkuDon/SoundCloudVisualizer">Source code on GitHub</a>
                    </footer>
                </div>
            </div>
        </div>

        <!-- Libraries -->
        <script src="http://connect.soundcloud.com/sdk.js"></script>
        <script src="bower_components/jquery/dist/jquery.min.js"></script>
        <script src="bower_components/angular/angular.js"></script>
        <script src="bower_components/angular-sanitize/angular-sanitize.min.js"></script>

        <!-- Modules -->
        <script src="js/app.js"></script>
        
        <!-- Controllers -->
        <script src="js/controllers/HistoryController.js"></script>
        <script src="js/controllers/PlaybackQueueController.js"></script>
        <script src="js/controllers/PlayerController.js"></script>
        <script src="js/controllers/VisualizerController.js"></script>
        
        <!-- Services -->
        <script src="js/services/player.js"></script>
        <script src="js/services/soundcloudResolver.js"></script>
        
        <!-- Filters / Directives -->
        <script src="js/filters.js"></script>
        
        <script src="js/soundcloud-resolver.js"></script>
        <script src="js/ui-manager.js"></script>
        <script src="js/player.js"></script>
        <script src="js/index.js"></script>
        <script src="js/visualizer.js"></script>
        <script src="js/visualizers/minimalistic-visualizer.js"></script>
        <script src="js/visualizers/waveform-visualizer.js"></script>
    </body>
</html>
